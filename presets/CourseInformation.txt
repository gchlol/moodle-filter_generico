{"key":"courseinformation","name":"Course Information","instructions":"","requirecss":"","requirejs":"","shim":"","defaults":"showstd=\"true|false\",showack=\"true|false\"","amd":"1","body":"<div class=\"row\">\n    <div class=\"col-lg-7\">\n        <div id=\"@@AUTOID@@\" class=\"accordian\"></div>\n    </div>\n\n    <div id=\"@@AUTOID@@_rc\" class=\"col-lg-5\">\n        <table class=\"table \">\n            <tbody>\n                <tr id=\"@@AUTOID@@_target\">\n                    <th class=\"text-right\" scope=\"row\">\n                        Target audience\n                    </th>\n                    <td>@@DATASET:target@@</td>\n                </tr>\n                <tr id=\"@@AUTOID@@_duration\">\n                    <th class=\"text-right\" scope=\"row\">\n                        Duration\n                    </th>\n                    <td id=\"@@AUTOID@@_dur\"></td>\n                </tr>\n                <tr id=\"@@AUTOID@@_com\">\n                    <th class=\"text-right\" scope=\"row\">\n                        Completed by\n                    </th>\n                    <td>@@DATASET:completed@@</td>\n                </tr>\n                <tr id=\"@@AUTOID@@_freq\">\n                    <th class=\"text-right\" scope=\"row\">\n                        Frequency\n                    </th>\n                    <td>@@DATASET:frequency@@</td>\n                </tr>\n                <tr id=\"@@AUTOID@@_dm\">\n                    <th class=\"text-right\" scope=\"row\">\n                        Delivery mode\n                    </th>\n                    <td>@@DATASET:delmode@@</td>\n                </tr>\n                <tr id=\"@@AUTOID@@_cpd\">\n                    <th class=\"text-right\" scope=\"row\">\n                        CPD points\n                    </th>\n                    <td>@@DATASET:cpd@@</td>\n                </tr>\n                <tr id=\"@@AUTOID@@_cont\">\n                    <th class=\"text-right\" scope=\"row\">\n                        Contact\n                    </th>\n                    <td>\n                        <i class=\"fa fa-envelope \"></i>\n                        <a href=\"mailto:@@DATASET:cemail@@\">@@DATASET:contact@@</a>\n                    </td>\n                </tr>\n                <tr id=\"@@AUTOID@@_intra\">\n                    <th class=\"text-right\" scope=\"row\">\n                        Intranet link\n                    </th>\n                    <td>\n                        <i class=\"fa fa-globe\"></i>\n                        <a href=\"@@DATASET:intra@@\" target=\"_new\">@@DATASET:intratext@@</a>\n                    </td>\n                </tr>\n                <tr id=\"@@AUTOID@@_current\">\n                    <th class=\"text-right\" scope=\"row\">\n                        <i class=\"fa fa-check-circle text-success\" style=\"font-size: 2em;\"></i>\n                    </th>\n                    <td>You are currently up to date with this course.</td>\n                </tr>\n                <tr id=\"@@AUTOID@@_expired\">\n                    <th class=\"text-right\" scope=\"row\">\n                        <i class=\"fa fa-exclamation-circle text-warning\" style=\"font-size: 2em;\"></i>\n                    </th>\n                    <td>You have expired. Please recomplete this course now.</td>\n                </tr>\n                <tr id=\"@@AUTOID@@_never\">\n                    <th class=\"text-right\" scope=\"row\">\n                        <i class=\"fa fa-times-circle text-danger\" style=\"font-size: 2em;\"></i>\n                    </th>\n                    <td> You have never completed this course. Please commence now.</td>\n                </tr>\n                <tr id=\"@@AUTOID@@_recomp\">\n\n                    <td colspan=\"2\">\n                        <div class=recompletion_info>\n                            <p>If you need to recomplete this course, please click the button below</p>\n                            <p>Your previous records will be archived and you can then proceed to recomplete each of the activities below.</p>\n                            <a href=\"/local/recompletion/resetcompletion.php?id=@@COURSE:id@@\" class=\"btn btn-outline-danger\">Reset my completion</a></div>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </div>\n</div>\n","bodyend":"","script":"Number.isInteger = Number.isInteger || function(value) {\n    return typeof value === \"number\" &&\n        isFinite(value) &&\n        Math.floor(value) === value;\n};\n\nvar root = $('#' + @@AUTOID@@);\nvar dataset = @@DATASET@@[0];\n\nvar showstd = @@showstd@@;\nvar showack = @@showack@@;\n\nvar defaulthtml = '<p><br></p>';\nvar defaulthtml2 = '<p><br /></p>';\n\nvar description = dataset.description;\nif (\n    description != '' &&\n    description != defaulthtml &&\n    description != defaulthtml2\n) {\n    root.append(accordion_item('desc', 'Course description', description, true));\n}\n\nvar obj = dataset.objective;\nif (\n    obj != '' &&\n    obj != defaulthtml &&\n    obj != defaulthtml2\n) {\n    root.append(accordion_item('obj', 'Learning objectives', obj));\n}\n\nvar cc = dataset.completion;\nif (\n    cc != '' &&\n    cc != defaulthtml &&\n    cc != defaulthtml2\n) {\n    root.append(accordion_item('cc', 'Course completion', cc));\n}\n\nvar std = dataset.std;\nif (\n    std != '' &&\n    std != defaulthtml &&\n    std != null &&\n    std != defaulthtml2 &&\n    showstd == 'true'\n) {\n    root.append(accordion_item('std', 'Standards relating to this course', std));\n    $('#ab_std_' + @@AUTOID@@).prepend('<p><a href=\"https://www.safetyandquality.gov.au/wp-content/uploads/2017/12/National-Safety-and-Quality-Health-Service-Standards-second-edition.pdf\" target=\"_blank\"><strong>National Safety and Quality Health Service (NSQHS) Standards<br></strong></a></p>');\n}\n\nvar ack = dataset.acknowledge;\nif (\n    ack != '' &&\n    ack != defaulthtml &&\n    ack != defaulthtml2 &&\n    showack == 'true'\n) {\n    root.append(accordion_item('ack', 'Acknowledgements', ack));\n}\n\nvar con = dataset.email;\nif (\n    con != '' &&\n    con != defaulthtml &&\n    con != defaulthtml2\n) {\n    root.append(accordion_item('con', 'Course contacts', con));\n}\n\nfunction accordion_item(name, title, content, show) {\n    if(show === undefined) {\n        show = false;\n    }\n\n    var expanded = show ? 'true' : 'false';\n\n    return '<div class=\"card\">' +\n        '<a id=\"l_' + name + '_' + @@AUTOID@@ + '\" class=\"btn btn-link\" data-toggle=\"collapse\" data-target=\"#cl_' + name + '_' + @@AUTOID@@ + '\" aria-expanded=\"' + expanded + '\" aria-controls=\"' + @@AUTOID@@ + '_' + name + '\">' +\n        '<div class=\"card-header text-left\" id=\"' + @@AUTOID@@ + '_' + name + '\">' +\n        '<h5>' + title + '</h5>' +\n        '</div>' +\n        '</a>' +\n\n        '<div id=\"cl_' + name + '_' + @@AUTOID@@ + '\" class=\"collapse\" aria-labelledby=\"' + title + '\" data-parent=\"#' + @@AUTOID@@ + '\">' +\n        '<div id=\"ab_' + name + '_' + @@AUTOID@@ + '\" class=\"card-body\">' + content + '</div>' +\n        '</div>' +\n        '</div>';\n}\n\nvar bg = 'bg-light';\nvar text = 'text-dark';\nvar activebg = 'bg-primary';\nvar activetext = 'text-white';\n\nvar expanded = $(\"#l_desc_\" + @@AUTOID@@).attr('aria-expanded');\nif (expanded  == 'true') {\n    $( \"#cl_desc_\" + @@AUTOID@@).addClass(\"show\");\n    $( \"#\" + @@AUTOID@@ + '_desc').addClass(activebg);\n    $( \"#\" + @@AUTOID@@ + '_desc').addClass(activetext);\n} else {\n    $( \"#\" + @@AUTOID@@ + '_desc').addClass(bg);\n    $( \"#\" + @@AUTOID@@ + '_desc').addClass(text);\n}\n\n$( \"#cl_desc_\" + @@AUTOID@@).on('show.bs.collapse', function () {\n    $( \"#\" + @@AUTOID@@ + '_desc').addClass(activebg);\n    $( \"#\" + @@AUTOID@@ + '_desc').addClass(activetext);\n    $( \"#\" + @@AUTOID@@ + '_desc').removeClass(bg);\n    $( \"#\" + @@AUTOID@@ + '_desc').removeClass(text);\n});\n\n$( \"#cl_desc_\" + @@AUTOID@@).on('hide.bs.collapse', function () {\n    $( \"#\" + @@AUTOID@@ + '_desc').addClass(bg);\n    $( \"#\" + @@AUTOID@@ + '_desc').addClass(text);\n    $( \"#\" + @@AUTOID@@ + '_desc').removeClass(activebg);\n    $( \"#\" + @@AUTOID@@ + '_desc').removeClass(activetext);\n});\n\nvar expanded = $(\"#l_obj_\" + @@AUTOID@@).attr('aria-expanded');\nif (expanded  == 'true') {\n    $( \"#cl_obj_\" + @@AUTOID@@).addClass(\"show\");\n    $( \"#\" + @@AUTOID@@ + '_obj').addClass(activebg);\n    $( \"#\" + @@AUTOID@@ + '_obj').addClass(activetext);\n} else {\n    $( \"#\" + @@AUTOID@@ + '_obj').addClass(bg);\n    $( \"#\" + @@AUTOID@@ + '_obj').addClass(text);\n}\n\n$( \"#cl_obj_\" + @@AUTOID@@).on('show.bs.collapse', function () {\n    $( \"#\" + @@AUTOID@@ + '_obj').addClass(activebg);\n    $( \"#\" + @@AUTOID@@ + '_obj').addClass(activetext);\n    $( \"#\" + @@AUTOID@@ + '_obj').removeClass(bg);\n    $( \"#\" + @@AUTOID@@ + '_obj').removeClass(text);\n});\n\n$( \"#cl_obj_\" + @@AUTOID@@).on('hide.bs.collapse', function () {\n    $( \"#\" + @@AUTOID@@ + '_obj').addClass(bg);\n    $( \"#\" + @@AUTOID@@ + '_obj').addClass(text);\n    $( \"#\" + @@AUTOID@@ + '_obj').removeClass(activebg);\n    $( \"#\" + @@AUTOID@@ + '_obj').removeClass(activetext);\n});\n\nvar expanded = $(\"#l_cc_\" + @@AUTOID@@).attr('aria-expanded');\nif (expanded  == 'true') {\n    $( \"#cl_cc_\" + @@AUTOID@@).addClass(\"show\");\n    $( \"#\" + @@AUTOID@@ + '_cc').addClass(activebg);\n    $( \"#\" + @@AUTOID@@ + '_cc').addClass(activetext);\n} else {\n    $( \"#\" + @@AUTOID@@ + '_cc').addClass(bg);\n    $( \"#\" + @@AUTOID@@ + '_cc').addClass(text);\n}\n\n$( \"#cl_cc_\" + @@AUTOID@@).on('show.bs.collapse', function () {\n    $( \"#\" + @@AUTOID@@ + '_cc').addClass(activebg);\n    $( \"#\" + @@AUTOID@@ + '_cc').addClass(activetext);\n    $( \"#\" + @@AUTOID@@ + '_cc').removeClass(bg);\n    $( \"#\" + @@AUTOID@@ + '_cc').removeClass(text);\n});\n\n$( \"#cl_cc_\" + @@AUTOID@@).on('hide.bs.collapse', function () {\n    $( \"#\" + @@AUTOID@@ + '_cc').addClass(bg);\n    $( \"#\" + @@AUTOID@@ + '_cc').addClass(text);\n    $( \"#\" + @@AUTOID@@ + '_cc').removeClass(activebg);\n    $( \"#\" + @@AUTOID@@ + '_cc').removeClass(activetext);\n});\n\nvar expanded = $(\"#l_std_\" + @@AUTOID@@).attr('aria-expanded');\nif (expanded  == 'true') {\n    $( \"#cl_std_\" + @@AUTOID@@).addClass(\"show\");\n    $( \"#\" + @@AUTOID@@ + '_std').addClass(activebg);\n    $( \"#\" + @@AUTOID@@ + '_std').addClass(activetext);\n} else {\n    $( \"#\" + @@AUTOID@@ + '_std').addClass(bg);\n    $( \"#\" + @@AUTOID@@ + '_std').addClass(text);\n}\n\n$( \"#cl_std_\" + @@AUTOID@@).on('show.bs.collapse', function () {\n    $( \"#\" + @@AUTOID@@ + '_std').addClass(activebg);\n    $( \"#\" + @@AUTOID@@ + '_std').addClass(activetext);\n    $( \"#\" + @@AUTOID@@ + '_std').removeClass(bg);\n    $( \"#\" + @@AUTOID@@ + '_std').removeClass(text);\n});\n\n$( \"#cl_std_\" + @@AUTOID@@).on('hide.bs.collapse', function () {\n    $( \"#\" + @@AUTOID@@ + '_std').addClass(bg);\n    $( \"#\" + @@AUTOID@@ + '_std').addClass(text);\n    $( \"#\" + @@AUTOID@@ + '_std').removeClass(activebg);\n    $( \"#\" + @@AUTOID@@ + '_std').removeClass(activetext);\n});\n\nvar expanded = $(\"#l_ack_\" + @@AUTOID@@).attr('aria-expanded');\nif (expanded  == 'true') {\n    $( \"#cl_ack_\" + @@AUTOID@@).addClass(\"show\");\n    $( \"#\" + @@AUTOID@@ + '_ack').addClass(activebg);\n    $( \"#\" + @@AUTOID@@ + '_ack').addClass(activetext);\n} else {\n    $( \"#\" + @@AUTOID@@ + '_ack').addClass(bg);\n    $( \"#\" + @@AUTOID@@ + '_ack').addClass(text);\n}\n\n$( \"#cl_ack_\" + @@AUTOID@@).on('show.bs.collapse', function () {\n    $( \"#\" + @@AUTOID@@ + '_ack').addClass(activebg);\n    $( \"#\" + @@AUTOID@@ + '_ack').addClass(activetext);\n    $( \"#\" + @@AUTOID@@ + '_ack').removeClass(bg);\n    $( \"#\" + @@AUTOID@@ + '_ack').removeClass(text);\n});\n\n$( \"#cl_ack_\" + @@AUTOID@@).on('hide.bs.collapse', function () {\n    $( \"#\" + @@AUTOID@@ + '_ack').addClass(bg);\n    $( \"#\" + @@AUTOID@@ + '_ack').addClass(text);\n    $( \"#\" + @@AUTOID@@ + '_ack').removeClass(activebg);\n    $( \"#\" + @@AUTOID@@ + '_ack').removeClass(activetext);\n});\n\nvar expanded = $(\"#l_con_\" + @@AUTOID@@).attr('aria-expanded');\nif (expanded  == 'true') {\n    $( \"#cl_con_\" + @@AUTOID@@).addClass(\"show\");\n    $( \"#\" + @@AUTOID@@ + '_con').addClass(activebg);\n    $( \"#\" + @@AUTOID@@ + '_con').addClass(activetext);\n} else {\n    $( \"#\" + @@AUTOID@@ + '_con').addClass(bg);\n    $( \"#\" + @@AUTOID@@ + '_con').addClass(text);\n}\n\n$( \"#cl_con_\" + @@AUTOID@@).on('show.bs.collapse', function () {\n    $( \"#\" + @@AUTOID@@ + '_con').addClass(activebg);\n    $( \"#\" + @@AUTOID@@ + '_con').addClass(activetext);\n    $( \"#\" + @@AUTOID@@ + '_con').removeClass(bg);\n    $( \"#\" + @@AUTOID@@ + '_con').removeClass(text);\n});\n\n$( \"#cl_con_\" + @@AUTOID@@).on('hide.bs.collapse', function () {\n    $( \"#\" + @@AUTOID@@ + '_con').addClass(bg);\n    $( \"#\" + @@AUTOID@@ + '_con').addClass(text);\n    $( \"#\" + @@AUTOID@@ + '_con').removeClass(activebg);\n    $( \"#\" + @@AUTOID@@ + '_con').removeClass(activetext);\n});\n\n\nvar ccfid = @@AUTOID@@ + '_ccf';\n\nvar ccf1 = dataset.ccf1;\nvar ccf2 = dataset.ccf2;\nvar ccf3 = dataset.ccf3;\nvar ccf4 = dataset.ccf4;\nif (\n    ccf1 == 1 ||\n    ccf2 == 1 ||\n    ccf3 == 1 ||\n    ccf4 == 1\n) {\n    $('#' + @@AUTOID@@ + '_rc').append(\n        '<div id=\"' + ccfid + '\" class=\"text-center\">' +\n        '<p class=\"text-primary font-italic\"><strong>Click on the icon below for more learning <br>opportunities relevant to your leadership level.</strong></p>' +\n        '<br>' +\n        '</div>'\n    );\n}\n\nvar ccfelement = $('#' + ccfid);\n\nif (ccf1 == 1) {\n    ccfelement.append('<a href=\"https://gchlol.sth.health.qld.gov.au/course/view.php?id=1062\" target=\"_blank\"><img src=\"https://cdn.gchlol.sth.health.qld.gov.au/public/images/icons/ccf/leading-self.jpg\" alt=\"Leading self icon\" class=\"img-responsive atto_image_button_text-bottom\" width=\"95\" height=\"98\"></a>');\n}\n\nif (ccf2 == 1) {\n    ccfelement.append('<a href=\"https://gchlol.sth.health.qld.gov.au/course/view.php?id=1067\" target=\"_blank\"><img src=\"https://cdn.gchlol.sth.health.qld.gov.au/public/images/icons/ccf/leading-others.jpg\" alt=\"Leading others\" class=\"img-responsive atto_image_button_text-bottom\" width=\"95\" height=\"99\"></a>');\n}\n\nif (ccf3 == 1) {\n    ccfelement.append('<a href=\"https://gchlol.sth.health.qld.gov.au/course/view.php?id=1069\" target=\"_blank\"><img src=\"https://cdn.gchlol.sth.health.qld.gov.au/public/images/icons/ccf/leading-leaders.jpg\" alt=\"Leading leaders\" class=\"img-responsive atto_image_button_text-bottom\" width=\"95\" height=\"100\"></a>');\n}\n\nif (ccf4 == 1) {\n    ccfelement.append('<a href=\"https://gchlol.sth.health.qld.gov.au/course/view.php?id=1070\" target=\"_blank\"><img src=\"https://cdn.gchlol.sth.health.qld.gov.au/public/images/icons/ccf/leading-organisation.jpg\" alt=\"Leading organisation\" class=\"img-responsive atto_image_button_text-bottom\" width=\"95\" height=\"100\">');\n}\n\nvar more = dataset.more;\nif (\n    more != '' &&\n    more != defaulthtml\n) {\n    $('#' + @@AUTOID@@ + '_rc').append('<div>' + more + '</div>');\n}\n\nvar duration = dataset.duration;\nvar durhtml = '';\nif (duration == 0) {\n    durhtml = '';\n\n} else if (duration < 60) {\n    durhtml = duration + ' minutes';\n\n} else if (duration == 60) {\n    durhtml = '1 hour';\n\n} else if (Number.isInteger(duration / 60)) {\n    durhtml = (duration / 60) + ' hours';\n\n} else if (duration < 120) {\n    durhtml = '1 hour ' + (duration - 60) + ' minutes';\n\n} else if (isNaN(duration)) {\n    durhtml = duration;\n\n} else {\n    var hours = Math.floor(duration / 60);\n    durhtml = hours + ' hours ' + (duration - (hours * 60)) + ' minutes';\n}\n\n$('#' + @@AUTOID@@ + '_dur').append(durhtml);\n\nif (dataset.target== '')  {\n    $('#' + @@AUTOID@@ + '_target').remove();\n}\n\nif (dataset.duration == '')  {\n    $('#' + @@AUTOID@@ + '_duration').remove();\n}\n\nif (dataset.delmode == '')  {\n    $('#' + @@AUTOID@@ + '_dm').remove();\n}\n\nif (dataset.completed == '')  {\n    $('#' + @@AUTOID@@ + '_com').remove();\n}\n\nif (dataset.frequency == '')  {\n    $('#' + @@AUTOID@@ + '_freq').remove();\n}\n\nif (dataset.cpd == '')  {\n    $('#' + @@AUTOID@@ + '_cpd').remove();\n}\n\nif (dataset.cemail == '')  {\n    $('#' + @@AUTOID@@ + '_cont').remove();\n}\n\nif (dataset.intra== '')  {\n    $('#' + @@AUTOID@@ + '_intra').remove();\n}\n\nif (dataset.recomp== 'false')  {\n    $('#' + @@AUTOID@@ + '_recomp').remove();\n}\n\nif (dataset.status== 'Current')  {\n    $('#' + @@AUTOID@@ + '_expired').remove();\n    $('#' + @@AUTOID@@ + '_never').remove();\n}\n\nif (dataset.status== 'Expired')  {\n    $('#' + @@AUTOID@@ + '_current').remove();\n    $('#' + @@AUTOID@@ + '_never').remove();\n}\n\nif (dataset.status== 'Never')  {\n    $('#' + @@AUTOID@@ + '_current').remove();\n    $('#' + @@AUTOID@@ + '_expired').remove();\n}\n","style":".card > a .card-header h5:after {\n    position: absolute;\n    right: 2em;\n\n    content: \"\\f078\";\n    font-family: FontAwesome;\n}\n\n.card > .gen-accord-icon .card-header h5:after {\n    margin: inherit;\n    position: absolute;\n    right: 2em;\n\n    content: \"\\f078\";\n    font-family: FontAwesome;\n}\n\n.card > a[aria-expanded=\"true\"] .card-header h5:after,\n.gen-accord-icon[aria-expanded=\"true\"] .card-header h5:after {\n    content: \"\\f077\";\n}\n\n.card-header.bg-light h5 {\n    color: #000 !important;\n}\n.card-header.bg-light:hover {\n    background-color: #0099cc !important;\n}\n.card-header.bg-light:hover h5 {\n    color: #000 !important;\n}\n\n.recompletion_info {\n    margin: 10px 0;\n    max-width: 800px;\n    padding:12px;\n\n    background-color: #BDE5F8;\n    border: 1px solid;\n    border-radius:.5em;\n    color: #00529B;\n}","dataset":"SELECT  0 AS id,\n        CASE\n            WHEN lrcen.value = 1 AND cc.timecompleted > UNIX_TIMESTAMP(DATE_SUB(CURDATE(), INTERVAL lrcex.value SECOND)) THEN 'True'\n            ELSE 'false'\n        END AS recomp,\n        CASE\n            WHEN cc.timecompleted IS NULL THEN 'Never'\n            WHEN cm.cohortid IS NOT NULL AND tpc.expiryformat = 4 AND cc.timecompleted > UNIX_TIMESTAMP(DATE_SUB(CURDATE(), INTERVAL tpc.expiry DAY)) THEN 'Current'\n            WHEN cm.cohortid IS NOT NULL AND tpc.expiryformat = 5 AND cc.timecompleted > UNIX_TIMESTAMP(DATE_SUB(CURDATE(), INTERVAL tpc.expiry WEEK)) THEN 'Current'\n            WHEN cm.cohortid IS NOT NULL AND tpc.expiryformat = 6 AND cc.timecompleted > UNIX_TIMESTAMP(DATE_SUB(CURDATE(), INTERVAL tpc.expiry MONTH)) THEN 'Current'\n            WHEN cm.cohortid IS NOT NULL AND tpc.expiryformat = 7 AND cc.timecompleted > UNIX_TIMESTAMP(DATE_SUB(CURDATE(), INTERVAL tpc.expiry YEAR)) THEN 'Current'\n            WHEN frequ.value = 1 AND cc.timecompleted > 1 THEN 'Current'\n            WHEN frequ.value = 2 AND cc.timecompleted > UNIX_TIMESTAMP(DATE_SUB(CURDATE(), INTERVAL 1 YEAR)) THEN 'Current'\n            WHEN frequ.value = 3 AND cc.timecompleted > UNIX_TIMESTAMP(DATE_SUB(CURDATE(), INTERVAL 2 YEAR)) THEN 'Current'\n            WHEN frequ.value = 4 AND cc.timecompleted > UNIX_TIMESTAMP(DATE_SUB(CURDATE(), INTERVAL 3 MONTH)) THEN  'Current'\n            WHEN frequ.value = 5 AND cc.timecompleted > UNIX_TIMESTAMP(DATE_SUB(CURDATE(), INTERVAL 6 MONTH)) THEN  'Current'\n            WHEN frequ.value = 6 AND cc.timecompleted > UNIX_TIMESTAMP(DATE_SUB(CURDATE(), INTERVAL 3 YEAR)) THEN  'Current'\n            WHEN frequ.value = 7 AND cc.timecompleted > UNIX_TIMESTAMP(DATE_SUB(CURDATE(), INTERVAL 18 MONTH)) THEN  'Current'\n            ELSE \"Expired\"\n        END AS status,\n        c.fullname,\n        description.value as description,\n        objective.value AS objective,\n        completion.value AS completion,\n        ackn.value AS acknowledge,\n        cpd.value AS cpd,\n        target.value AS target,\n        duration.value AS duration,\n        cont.value AS contact,\n        CASE\n            WHEN  cm.cohortid IS NOT NULL AND tpc.delay = 0 THEN 'On commencement of duties'\n            WHEN  cm.cohortid IS NOT NULL AND tpc.delayformat = 4 THEN CONCAT('Within ',tpc.delay,' days of commencing')\n            WHEN  cm.cohortid IS NOT NULL AND tpc.delayformat = 5 THEN CONCAT('Within ',tpc.delay,' weeks of commencing')\n            WHEN  cm.cohortid IS NOT NULL AND tpc.delayformat = 6 THEN CONCAT('Within ',tpc.delay,' months of commencing')\n            WHEN  cm.cohortid IS NOT NULL AND tpc.delayformat = 7 THEN CONCAT('Within ',tpc.delay,' years of commencing')\n            ELSE completed.value\n        END AS completed,\n        CASE\n            WHEN  cm.cohortid IS NOT NULL AND tpc.expiry = 0 THEN 'Once only'\n            WHEN  cm.cohortid IS NOT NULL AND tpc.expiryformat = 4 THEN CONCAT('Every ',tpc.expiry,' days')\n            WHEN  cm.cohortid IS NOT NULL AND tpc.expiryformat = 5 THEN CONCAT('Every ',tpc.expiry,' weeks')\n            WHEN  cm.cohortid IS NOT NULL AND tpc.expiryformat = 6 THEN CONCAT('Every ',tpc.expiry,' months')\n            WHEN  cm.cohortid IS NOT NULL AND tpc.expiryformat = 7 THEN CONCAT('Every ',tpc.expiry,' years')\n            WHEN frequ.value = 1 THEN 'Once only'\n            WHEN frequ.value = 2 THEN 'Annually'\n            WHEN frequ.value = 3 THEN 'Every two years'\n            WHEN frequ.value = 4 THEN 'Every three months'\n            WHEN frequ.value = 5 THEN 'Every six months'\n            WHEN frequ.value = 6 THEN 'Every three years'\n            WHEN frequ.value = 7 THEN 'Every eighteen months'\n            ELSE ''\n        END AS frequency,\n        CASE\n            WHEN mode.value = 1 THEN 'Online'\n            WHEN mode.value = 2 THEN 'Facilitated'\n            WHEN mode.value = 3 THEN 'Blended'\n            ELSE ''\n        END AS delmode,\n        email.value AS email,\n        GROUP_CONCAT(\n            CASE\n                WHEN stdd.fieldid = 10 AND stdd.intvalue = 1 THEN '<a class=\"std-thumb-link\" href=\"https://www.safetyandquality.gov.au/our-work/clinical-governance/clinical-governance-standard\" target=\"_blank\"><img src=\"https://cdn.gchlol.sth.health.qld.gov.au/public/images/icons/nsqhs/01-clinical-governance.jpg\" alt=\"Standard 1 - Clinical Governance\" class=\"img-fluid img-thumbnail\" style=\"border: 0;\" width=\"50\" height=\"50\"></a>'\n                WHEN stdd.fieldid = 11 AND stdd.intvalue = 1 THEN '<a class=\"std-thumb-link\" href=\"https://www.safetyandquality.gov.au/standards/nsqhs-standards/partnering-consumers-standard\" target=\"_blank\"><img src=\"https://cdn.gchlol.sth.health.qld.gov.au/public/images/icons/nsqhs/02-partnering-with-consumers.jpg\" alt=\"Standard 2 - Partnering with Consumers\" class=\"img-fluid img-thumbnail\" style=\"border: 0;\" width=\"50\" height=\"50\"></a>'\n                WHEN stdd.fieldid = 12 AND stdd.intvalue = 1 THEN '<a class=\"std-thumb-link\" href=\"https://www.safetyandquality.gov.au/standards/nsqhs-standards/preventing-and-controlling-infections-standard\" target=\"_blank\"><img src=\"https://cdn.gchlol.sth.health.qld.gov.au/public/images/icons/nsqhs/03-pachai.jpg\" alt=\"Standard 3 - Preventing and Controlling Healthcare-Associated Infection\" class=\"img-fluid img-thumbnail\" style=\"border: 0;\" width=\"50\" height=\"50\"></a>'\n                WHEN stdd.fieldid = 13 AND stdd.intvalue = 1 THEN '<a class=\"std-thumb-link\" href=\"https://www.safetyandquality.gov.au/standards/nsqhs-standards/medication-safety-standard\" target=\"_blank\"><img src=\"https://cdn.gchlol.sth.health.qld.gov.au/public/images/icons/nsqhs/04-medication-safety.jpg\" alt=\"Standard 4 - Medication Safety\" class=\"img-fluid img-thumbnail\" style=\"border: 0;\" width=\"50\" height=\"50\"></a>'\n                WHEN stdd.fieldid = 14 AND stdd.intvalue = 1 THEN '<a class=\"std-thumb-link\" href=\"https://www.safetyandquality.gov.au/standards/nsqhs-standards/comprehensive-care-standard\" target=\"_blank\"><img src=\"https://cdn.gchlol.sth.health.qld.gov.au/public/images/icons/nsqhs/05-comprehensive-care.jpg\" alt=\"Standard 5 - Comprehensive Care\" class=\"img-fluid img-thumbnail\" style=\"border: 0;\" width=\"50\" height=\"50\"></a>'\n                WHEN stdd.fieldid = 15 AND stdd.intvalue = 1 THEN '<a class=\"std-thumb-link\" href=\"https://www.safetyandquality.gov.au/standards/nsqhs-standards/communicating-safety-standard\" target=\"_blank\"><img src=\"https://cdn.gchlol.sth.health.qld.gov.au/public/images/icons/nsqhs/06-communicating-for-safety.jpg\" alt=\"Standard 6 - Communicating for Safety\" class=\"img-fluid img-thumbnail\" style=\"border: 0;\" width=\"50\" height=\"50\"></a>'\n                WHEN stdd.fieldid = 16 AND stdd.intvalue = 1 THEN '<a class=\"std-thumb-link\" href=\"https://www.safetyandquality.gov.au/standards/nsqhs-standards/blood-management-standard\" target=\"_blank\"><img src=\"https://cdn.gchlol.sth.health.qld.gov.au/public/images/icons/nsqhs/07-blood-management.jpg\" alt=\"Standard 7 - Blood Management\" class=\"img-fluid img-thumbnail\" style=\"border: 0;\" width=\"50\" height=\"50\"></a>'\n                WHEN stdd.fieldid = 17 AND stdd.intvalue = 1 THEN '<a class=\"std-thumb-link\" href=\"https://www.safetyandquality.gov.au/standards/nsqhs-standards/recognising-and-responding-acute-deterioration-standard\" target=\"_blank\"><img src=\"https://cdn.gchlol.sth.health.qld.gov.au/public/images/icons/nsqhs/08-rartad.jpg\" alt=\"Standard 8 - Recognising and Responding to Acute Deterioration\" class=\"img-fluid img-thumbnail\" style=\"border: 0;\" width=\"50\" height=\"50\"></a>'\n            END\n            SEPARATOR \"\"\n        ) AS std,\n        ccf1.intvalue AS ccf1,\n        ccf2.intvalue AS ccf2,\n        ccf3.intvalue AS ccf3,\n        ccf4.intvalue AS ccf4,\n        cemail.value AS cemail,\n        more.value AS more,\n        intra.charvalue AS intra,\n        intratext.charvalue AS intratext\n\nFROM    {course} c\n        JOIN {customfield_data} description ON\n            description.instanceid = c.id AND\n            description.fieldid = 1 AND\n            c.id = ?\n        LEFT JOIN {customfield_data} objective ON\n            objective.instanceid = c.id AND\n            objective.fieldid = 4\n        LEFT JOIN {customfield_data} completion ON\n            completion.instanceid = c.id AND\n            completion.fieldid = 2\n        LEFT JOIN {customfield_data} ackn ON\n            ackn.instanceid = c.id AND\n            ackn.fieldid = 3\n        LEFT JOIN {customfield_data} cont ON\n            cont.instanceid = c.id AND\n            cont.fieldid = 60\n\n        LEFT JOIN {customfield_data} target ON\n            target.instanceid = c.id AND\n            target.fieldid = 72\n        LEFT JOIN {customfield_data} duration ON\n            duration.instanceid = c.id AND\n            duration.fieldid = 6\n        LEFT JOIN {customfield_data} completed ON\n            completed.instanceid = c.id AND\n            completed.fieldid = 7\n        LEFT JOIN {customfield_data} frequ ON\n            frequ.instanceid = c.id AND\n            frequ.fieldid = 8\n        LEFT JOIN {customfield_data} mode ON\n            mode.instanceid = c.id AND\n            mode.fieldid = 9\n        LEFT JOIN {customfield_data} cpd ON\n            cpd.instanceid = c.id AND\n            cpd.fieldid = 46\n        LEFT JOIN {customfield_data} email ON\n            email.instanceid = c.id AND\n            email.fieldid = 61\n        LEFT JOIN {customfield_data} cemail ON\n            cemail.instanceid = c.id AND\n            cemail.fieldid = 62\n        LEFT JOIN {customfield_data} more ON\n            more.instanceid = c.id AND\n            more.fieldid = 63\n\n        LEFT JOIN {customfield_data} stdd ON\n            stdd.instanceid = c.id\n        LEFT JOIN {customfield_field} stdf ON\n            stdf.id = stdd.fieldid AND\n            stdf.categoryid = 2\n\n        LEFT JOIN {customfield_data} ccf1 ON\n            ccf1.instanceid = c.id AND\n            ccf1.fieldid = 18\n        LEFT JOIN {customfield_data} ccf2 ON\n            ccf2.instanceid = c.id AND\n            ccf2.fieldid = 19\n        LEFT JOIN {customfield_data} ccf3 ON\n            ccf3.instanceid = c.id AND\n            ccf3.fieldid = 20\n        LEFT JOIN {customfield_data} ccf4 ON\n            ccf4.instanceid = c.id AND\n            ccf4.fieldid = 21\n\n        LEFT JOIN {customfield_data} intra ON\n            intra.instanceid = c.id AND\n            intra.fieldid = 75\n        LEFT JOIN {customfield_data} intratext ON\n            intratext.instanceid = c.id AND\n            intratext.fieldid = 76\n\n        LEFT JOIN (\n            SELECT  ccg.userid,\n                    ccg.course,\n                    max(ccg.timecompleted) AS timecompleted\n            FROM    (\n                        SELECT  *\n                        FROM    (\n                                        SELECT  *\n                                        FROM    {course_completions} cc1\n                                        WHERE   cc1.userid = ?\n                                    UNION\n                                        SELECT  *\n                                        FROM    {local_recompletion_cc} lrc\n                                        WHERE   lrc.userid = ?\n                                ) cctot\n                        ORDER BY cctot.timecompleted DESC\n                    ) ccg\n            GROUP BY ccg.course\n        ) cc ON\n            cc.course = c.id AND\n            cc.userid = ?\n        LEFT JOIN {tool_trainingplan_courses} tpc ON\n            tpc.courseid = c.id\n        LEFT JOIN {tool_trainingplan_cohorts} tpco ON\n            tpco.planid = tpc.planid\n        LEFT JOIN {cohort_members} cm ON\n            cm.cohortid = tpco.cohortid AND\n            cm.userid = cc.userid\n        LEFT JOIN {local_recompletion_config} lrcen ON\n            lrcen.course = c.id AND\n            lrcen.name = \"enable\"\n        LEFT JOIN {local_recompletion_config} lrcex ON\n            lrcex.course = c.id AND\n            lrcex.name = \"recompletionduration\"\n\nGROUP BY c.id","datasetvars":"@@COURSE:id@@,@@USER:id@@,@@USER:id@@,@@USER:id@@","alternate":"","alternateend":"","version":"1.1.0"}